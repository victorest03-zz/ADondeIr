$(function(){function i(n,t,i,r,u){n.route({origin:i,destination:r,waypoints:u.length===0?null:u,travelMode:google.maps.TravelMode.DRIVING},function(n,i){i==google.maps.DirectionsStatus.OK?t.setDirections(n):window.alert("Directions request failed due to "+i)})}const n=$("#btnGuardarRuta"),t=$("#btnGenerarRuta");t.on("click",function(){$.ajax({url:"/Ruta/GetActiveRuta",type:"GET",cache:!1,success:function(n){if(n){var t=[],r=new google.maps.LatLng(n.RutaProducto[0].Producto.cLatitud,n.RutaProducto[0].Producto.cLongitud),u=new google.maps.LatLng(n.RutaProducto[n.RutaProducto.length-1].Producto.cLatitud,n.RutaProducto[n.RutaProducto.length-1].Producto.cLongitud),f={zoom:7,center:r},e=new google.maps.Map(document.getElementById("map"),f),o=new google.maps.DirectionsService,s=new google.maps.DirectionsRenderer({map:e});$.each(n.RutaProducto,function(i,r){i!==0&&i!==n.RutaProducto.length-1&&t.push({location:new google.maps.LatLng(r.Producto.cLatitud,r.Producto.cLongitud),stopover:!0})});i(o,s,r,u,t)}}})});n.on("click",function(){$.ajax({url:"/Ruta/GuardarRuta",type:"GET",cache:!1,success:function(n){n.Success?(alert("Ruta Guardada Exitosamente"),location.href="/Ruta"):alert(`Algo Salio mal :${n.Message}`)}})})});