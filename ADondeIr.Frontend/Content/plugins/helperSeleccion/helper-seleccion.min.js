jQuery.fn.extend({helpselect:function(n){function u(){var u,s,l,e,w,a,o,b,v,k,y;if(!n.eventBegin||n.eventBegin()!=!1){if(r=!0,u=$(this),u.attr("data-helpselect-open")=="false"){var f=$('<div class="modal fade" tabindex="-1" role="dialog">'),d=$('<div class="modal-dialog modal-lg" role="document">').appendTo(f),c=$('<div class="modal-content">').appendTo(d),p=$('<div class="modal-header">').appendTo(c),ot=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>').appendTo(p),g=$('<h4 class="modal-title">').appendTo(p),nt=$('<div class="modal-body row">').appendTo(c),h=$('<div class="modal-footer">').appendTo(c),tt=$('<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar<\/button>').appendTo(h);g.text(n.title?n.title:"Busqueda");s=$('<div class="col-sm-12"><table id="example" class="table table-bordered table-hover helper-seleccion" cellspacing="0" width="100%"><\/table><\/div>').appendTo(nt);$.extend(!0,$.fn.dataTable.defaults,{lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todo"]],language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando  _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},paging:!0,lengthChange:!1,searching:!0,ordering:!0,info:!0,autoWidth:!0,serverSide:n.serverSide?n.serverSide:!1,initComplete:function(){if(n.multiFilter===!0&&n.serverSide===!0){const n=this.api();n.columns().every(function(){var n=this;$("input",this.footer()).on("keyup change",function(){n.search()!==this.value&&n.search(this.value).draw()})})}}});n.multiFilter===!0&&($tfoot=$("<tfoot>").append("<tr>"),$.each(n.columns,function(n,t){t.className=="select-checkbox"?$tfoot.find("tr").append("<th><\/th>"):$tfoot.find("tr").append('<th><input type="text" class="form-control" placeholder="Buscar '+t.title+'" /><\/th>')}),s.find("table").append($tfoot));e={};n.ajax.parameters&&$.each(n.ajax.parameters,function(n,t){e[t.attr("name")]=t.val()});n.ajax.parametersDefault&&Object.keys(n.ajax.parametersDefault).forEach(function(t){e[t]=n.ajax.parametersDefault[t]});l=Object.keys(e).length!==0?n.ajax.selectId==!0&&Object.keys(e).length===1?n.ajax.url+"/"+e[Object.keys(e)[0]]:{url:n.ajax.url,data:e}:n.ajax;l.type=n.ajax.type?n.ajax.type:"GET";a=function(){var t=o.row($(this)).data();(i=="text"||i=="number")&&(u.removeClass("placeholder"),u.text(""));r=!1;f.modal("hide");n.eventdbClickRow&&n.eventdbClickRow(t,u)};o=s.find("table").DataTable({ajax:l,columns:n.columns,order:[[n.multiSelect?1:0,"asc"]],select:{style:"multi",selector:"td:first-child"},dom:"<'row'<'col-xs-6 toolbar-tb-helperseleccion'l><'col-xs-6 text-right'f>><'row'<'col-sm-12'<'table-responsive'tr>>><'row'<'col-sm-5'i><'col-sm-7'p>>",createdRow:n.createdRow?n.createdRow:null}).on("click","tbody tr",function(){clearTimeout(w);var n=this;$(n).on("click",a);w=setTimeout(function(){$(n).off("click",a)},500)});s.on("click","td.select-checkbox",function(){var n=$(this).parents("table");$(this).parent().toggleClass("selected");n.find("td.select-checkbox").parent(".selected").length===n.find("td.select-checkbox").length?n.find("th.select-checkbox").removeClass("indeterminate").addClass("selected"):n.find("td.select-checkbox").parent(".selected").length===0?n.find("th.select-checkbox").removeClass("indeterminate").removeClass("selected"):n.find("th.select-checkbox").removeClass("selected").addClass("indeterminate");h.find("button:eq(1)").trigger("change")});s.on("click","th.select-checkbox",function(){var n=$(this).parents("table");n.find("th.select-checkbox").hasClass("selected")?(o.rows({filter:"applied"}).every(function(){$(this.node()).removeClass("selected")}),n.find("th.select-checkbox").removeClass("selected")):(o.rows({filter:"applied"}).every(function(){$(this.node()).addClass("selected")}),n.find("th.select-checkbox").addClass("selected"));h.find("button:eq(1)").trigger("change")});if(n.multiFilter===!0&&n.serverSide!==!0&&o.columns().every(function(){var n=this;$("input",this.footer()).on("keyup change",function(){n.search()!==this.value&&n.search(this.value).draw()})}),n.multiSelect==!0&&(o.column("1:visible").order("asc").draw(),b=s.find("table"),v=[],tt.addClass("pull-left"),k=$('<button type="button" class="btn btn-primary" disabled>Todos los Selc.<\/button>').on("click",function(){r=!1;f.modal("hide");$.each(o.rows(".selected").data(),function(n,t){v.push(t)});n.eventBtnAllSelected&&n.eventBtnAllSelected(v,u)}).on("change",function(){b.find("td.select-checkbox").parent(".selected").length===0?$(this).attr("disabled","disabled"):$(this).removeAttr("disabled")}),h.append(k)),n.btnNew){var it=s.find(".toolbar-tb-helperseleccion"),rt=n.btnNew.icon?n.btnNew.icon:"glyphicon glyphicon-plus",ut=n.btnNew.class?n.btnNew.class:"btn btn-primary",ft=n.btnNew.text?n.btnNew.text:"Nuevo",et=$('<button type="button" class="'+ut+'"><i class="'+rt+'"><\/i> '+ft+" <\/button>").on("click",function(){n.btnNew.action(f,o)});et.appendTo(it)}f.on("hidden.bs.modal",function(){f.remove();u.attr("data-helpselect-open",!1);r==!0&&((i=="text"||i=="number")&&t.attr("placeholder")&&u.addClass("placeholder").text(t.attr("placeholder")),n.eventCancel&&n.eventCancel(u))});f.modal("show");y=1040+10*$(".modal:visible").length;f.css("z-index",y);setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",y-1).addClass("modal-stack")},0);u.attr("data-helpselect-open",!0)}n.eventEnd&&n.eventEnd(u)}}var t=$(this),r=!0,i;try{i=t[0].type}catch(s){}if(n.multiSelect==!0&&n.columns.splice(0,0,{data:"",render:function(){return""},searchable:!1,orderable:!1,className:"select-checkbox"}),i=="button"){t.attr("data-helpselect-open",!1);t.on("click",u)}else{var o=n.icon?n.icon:"glyphicon glyphicon-search",f=$('<i class="helper-seleccion-icon '+o+'"><\/i>'),e=$("<div>").addClass(t.attr("class")).addClass("helper-seleccion");if(t.attr("disabled")&&e.attr("disabled","disabled"),t.attr("class",""),n.fulldisplay!=!1){if(!t.attr("disabled")){t.attr("data-helpselect-open",!1);t.on("click",u)}}else if(!t.attr("disabled")){f.attr("data-helpselect-open",!1);f.on("click",u)}t.addClass("helper-seleccion-input").wrap(e);t.attr("disabled")||t.after(f)}}});